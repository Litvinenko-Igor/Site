<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title th:text="${car.brand + ' ' + car.model}">Car</title>
    <link rel="stylesheet" href="/css/site-light.css">
    <style>
        .wrap{ max-width: 980px; margin: 0 auto; padding: 44px 18px; }
        .back{ display:inline-block; margin-bottom: 14px; text-decoration:none; }
        .panel{
            display:grid;
            grid-template-columns: 1.2fr .8fr;
            gap: 16px;
        }
        .card{
            border:1px solid var(--border);
            border-radius: 18px;
            background: rgba(255,255,255,.78);
            backdrop-filter: blur(10px);
            overflow:hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,.08);
        }
        .thumb{ width:100%; height: 420px; object-fit: cover; display:block; background:#f3f3f3; }
        .body{ padding: 16px; }
        .title{ margin:0 0 6px; font-size: 22px; font-weight: 900; }
        .muted{ color: var(--muted); margin: 0 0 14px; }
        .row{ display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px solid var(--border); font-size:14px; }
        .row:last-child{ border-bottom:0; }
        .actions{ display:flex; gap:10px; margin-top: 14px; flex-wrap:wrap; }
        .btnx{
            padding: 12px 14px;
            border-radius: 14px;
            border: 1px solid var(--border);
            background: rgba(255,255,255,.85);
            text-decoration:none;
            color: inherit;
            font-weight: 800;
            cursor:pointer;
        }
        .primary{ background: rgba(72,239,189,.18); border-color: rgba(72,239,189,.55); }
        .warn{ background: rgba(239,68,68,.12); border-color: rgba(239,68,68,.35); }
        .msg{ margin: 10px 0 0; padding: 12px; border-radius: 14px; border:1px solid var(--border); }
    </style>
</head>
<body>

<div class="wrap">
    <a class="back" href="/market">‚Üê –ù–∞–∑–∞–¥ –¥–æ Market</a>

    <div class="panel">
        <div class="card">
            <img class="thumb" th:if="${car.imagePath != null}" th:src="${car.imagePath}" alt="car photo">
            <div class="thumb" th:if="${car.imagePath == null}"></div>
        </div>

        <div class="card">
            <div class="body">
                <p class="title" th:text="${car.brand + ' ' + car.model}"></p>
                <p class="muted" th:text="${car.description}"></p>

                <div class="row"><span>üí∂ –¶—ñ–Ω–∞</span><b th:text="${car.price}"></b></div>
                <div class="row"><span>‚ö° Top speed</span><b th:text="${car.topSpeed}"></b></div>
                <div class="row"><span>‚õΩ –ü–∞–ª–∏–≤–æ</span><b th:text="${car.fuelType}"></b></div>
                <div class="row"><span>üìå –°—Ç–∞—Ç—É—Å</span><b th:text="${car.status}"></b></div>

                <div class="msg" th:if="${message != null}" th:text="${message}"></div>
                <div class="msg warn" th:if="${error != null}" th:text="${error}"></div>

                <div class="actions">
                    <form th:if="${currentUser != null}" th:action="@{/market/{id}/buy(id=${car.id})}" method="post">
                        <button class="btnx primary" type="submit">‚úÖ Buy</button>
                    </form>

                    <a th:if="${currentUser == null}" class="btnx primary" href="/sign_in">
                        üîë –£–≤—ñ–π—Ç–∏, —â–æ–± –∫—É–ø–∏—Ç–∏
                    </a>

                    <a class="btnx" href="/market">üõí –î–æ —Å–ø–∏—Å–∫—É</a>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
